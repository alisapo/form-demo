(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,t,s){},35:function(e,t,s){},36:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),r=s(21),c=s.n(r),i=(s(28),s(4)),o=s(10),l=s(11),u=s(13),d=s(12),h=s(23),j=s(2),b=s(15),p=s(8),m=/^[a-z_]{4,}$/,f=/^[\S]{6,}$/,O=function(e,t){var s=null;try{switch(e){case"username":t&&m.test(t)||(s="Please enter a valid name");break;case"password":t&&f.test(t)||(s="Password must contain at least 6 symbols")}return s}catch(a){console.log(a)}},v=s(1),x=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).state={submit:!1,form:{username:"",password:""},err:{username:null,password:null,enter:null}},e.handleData=e.handleData.bind(Object(p.a)(e)),e.getButton=e.getButton.bind(Object(p.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(p.a)(e)),e}return Object(l.a)(s,[{key:"handleData",value:function(e){var t,s=this,a=e.target.name,n=e.target.value,r=this.state,c=r.form,o=r.err;t=Object(i.a)(Object(i.a)({},c),{},Object(b.a)({},a,n)),this.setState({form:t},(function(){var e,t=O(a,n);e=Object(i.a)(Object(i.a)({},o),{},Object(b.a)({},a,t)),s.setState({err:e})}))}},{key:"getButton",value:function(){var e=this.state.form;return!e.username||!e.password}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var s=this.state,a=s.form,n=s.err,r=function(e,t,s){var a={};return Object.keys(t).map((function(t){var n=s(t,e[t]);n&&(a[t]=n)})),a}(a,n,O);if(0!=Object.keys(r).length)return this.setState({err:Object(i.a)(Object(i.a)({},n),r)}),!1;this.setState({submit:!0},(function(){var e={username:a.username,password:a.password};fetch("https://agile-garden-50413.herokuapp.com/api/token/login/",{method:"POST",mode:"cors",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){if(200==e.status)return e.json();t.setState({err:{enter:"Error in username or password"}})})).then((function(e){t.props.setAuth(e.auth_token),t.props.history.push("/users")})).catch((function(e){t.setState({form:{username:"",password:""},submit:!1}),console.log(e)}))}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.form,a=t.err;return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("h1",{children:"Log In"}),Object(v.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(v.jsxs)("div",{className:"username",children:[Object(v.jsx)("input",{name:"username",type:"text",placeholder:"Enter name",value:s.username,onInput:function(t){return e.handleData(t)}}),a.username?Object(v.jsx)("div",{className:"err-username",children:a.username}):""]}),Object(v.jsxs)("div",{className:"password",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"back-img-pass",children:Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"19.89",viewBox:"0 0 16 19.89",children:[Object(v.jsx)("path",{className:"a",d:"M17,8H16V6.11a4,4,0,0,0-8,0V8H7a3,3,0,0,0-3,3v8a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V11A3,3,0,0,0,17,8ZM10,6.11a2,2,0,1,1,4,0V8H10ZM18,19a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V11a1,1,0,0,1,1-1H17a1,1,0,0,1,1,1Z",transform:"translate(-4 -2.11)"}),Object(v.jsx)("path",{className:"a",d:"M12,12a3,3,0,1,0,3,3A3,3,0,0,0,12,12Zm0,4a1,1,0,1,1,1-1A1,1,0,0,1,12,16Z",transform:"translate(-4 -2.11)"})]})}),Object(v.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:s.password,onInput:function(t){return e.handleData(t)}})]}),a.password?Object(v.jsx)("div",{className:"err-password",children:a.password}):""]}),Object(v.jsx)("button",{className:"login",disabled:this.getButton(),type:"submit",children:"Sign in"}),a.enter?Object(v.jsx)("div",{className:"err-login",children:a.enter}):""]})]})}}]),s}(n.a.Component),g=Object(j.e)(x),y=function(e){var t=e.obj;return Object(v.jsx)("div",{children:Array.from(t).map((function(e){return Object(v.jsxs)("div",{className:"user-card",children:[Object(v.jsx)("div",{className:"user-id",children:e.id}),Object(v.jsx)("div",{className:"user-name",children:e.username}),Object(v.jsx)("div",{className:"user-join",children:e.date_joined}),Object(v.jsx)("div",{className:"user-login",children:e.last_login}),e.is_active?Object(v.jsx)("div",{className:"user-active",children:"Active"}):Object(v.jsx)("div",{className:"user-activestaff",children:"Inactive"}),e.is_staff?Object(v.jsx)("div",{className:"user-staff",children:"Staff"}):Object(v.jsx)("div",{className:"user-staff",children:"No staff"}),e.is_superuser?Object(v.jsx)("div",{className:"user-super",children:"Superuser"}):Object(v.jsx)("div",{className:"user-super",children:"User"})]},e.id)}))})},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc";return function(t,s){var a=0;return t.id>s.id?a=1:t.id<s.id&&(a=-1),"desc"===e?-1*a:a}},S=function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(){var e;return Object(o.a)(this,s),(e=t.call(this)).logOut=function(t){t.preventDefault(),fetch("https://agile-garden-50413.herokuapp.com/api/token/logout/",{method:"POST",headers:{Accept:"application/json"}}).then((function(t){401==t.status?(e.props.setAuth(""),e.props.history.push("/login")):console.log(t.statusText)})).catch((function(e){console.log(e)}))},e.handleFilter=function(t){e.setState({filterBy:t.target.value.toLowerCase()});var s=e.state.allUsers.filter((function(t){return t.username.indexOf(e.state.filterBy)>=0}));e.setState({filteredUsers:s})},e.handleSort=function(){var t=e.state,s=t.allUsers;"asc"===t.sortBy?e.setState({allUsers:s.sort(N("desc")),sortBy:"desc"}):e.setState({allUsers:s.sort(N("asc")),sortBy:"asc"})},e.state={allUsers:"",filterBy:"",filteredUsers:"",sortBy:"asc"},e.handleFilter=e.handleFilter.bind(Object(p.a)(e)),e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;fetch("https://agile-garden-50413.herokuapp.com/api/users/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(this.props.auth)}}).then((function(e){if(200==e.status)return e.json();console.log(e.statusText)})).then((function(t){e.setState({allUsers:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"control-panel",children:[Object(v.jsx)("div",{className:"filter",children:Object(v.jsx)("input",{type:"text",placeholder:"Enter username",value:this.filterBy,onInput:this.handleFilter})}),Object(v.jsxs)("div",{className:"buttons",children:[Object(v.jsxs)("button",{className:"sort",onClick:this.handleSort,children:["Sort ",this.state.sortBy]}),Object(v.jsx)("button",{className:"logout",onClick:this.logOut,children:"Log Out"})]})]}),Object(v.jsx)("div",{className:"users",children:Object(v.jsx)(y,{obj:this.state.filterBy?this.state.filteredUsers:this.state.allUsers})})]})}}]),s}(n.a.Component),w=(s(35),function(e){Object(u.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(o.a)(this,s),(a=t.call(this,e)).setAuth=function(e){a.setState({auth:e})},a.state={auth:""},a}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(h.a,{basename:"/form-demo/login",children:[Object(v.jsx)(j.a,{path:"/login",type:"guest",render:function(t){return Object(v.jsx)(g,Object(i.a)(Object(i.a)(Object(i.a)({setAuth:e.setAuth},t),e.props),e.state))}}),Object(v.jsx)(j.a,{path:"/users",type:"private",render:function(t){return Object(v.jsx)(S,Object(i.a)(Object(i.a)(Object(i.a)({setAuth:e.setAuth},t),e.props),e.state))}})]})}}]),s}(n.a.Component));c.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(w,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.fe7c368c.chunk.js.map